# proj10实训七：LOOK调度算法的实现

## 背景了解：LOOK调度算法的实现

------

​	本实训任务主要是在uCore中添加一个简单的磁盘I/O调度模拟模块，通过LOOK算法遍历链表并返回遍历顺序数组，数组成员为BIO的逻辑块地址，并且还要根据调度顺序计算时间开销。

[TOC]

### 一、LOOK算法

​	为了减少对文件的访问时间，应采用一种最佳的磁盘调度算法，以使各进程对磁盘的平均访问时间最少。由于在访问磁盘时主要是寻道时间。因此，**磁盘调度的目标是使磁盘的平均寻道时间最少。**常用的磁盘调度算法有先来先服务(FCFS)，最短时间寻找优先(SSTF)，扫描算法(SCAN)，LOOK算法，C-LOOK算法，循环扫描算法(C-SCAN)。这里我们主要针对LOOK算法进行展开。

#### 1.1 方法

​	LOOK和C-LOOK就是对应SCAN和C-SCAN的改进算法。因为SCAN和C-SCAN中每次磁头都要走到磁道尽头，而实际过程中并不需要要求磁头走到尽头，而是到达该方向的最后一个请求后即可返回，这样可以避免一些不必要的磁头移动。

​	LOOK算法首先根据自身磁头位置与初始方向，沿一个方向（LBA增大或者LBA减小方向）进行查看，当处理完一个方向上的请求后，立刻变换方向，沿着新方向边遍历块边操作直到请求清空。

#### 1.2 优点

​	可以避免一些不必要的磁头移动。

#### 1.3 注意事项

​	LOOK调度算法针对的是让寻道时间最短，其关注的是磁道上的移动。在计算的时候需要注意。此外，请求可以以多种形式出现，本体中请求以双向链表存储，在进行块释放后需要及时更新链表防止出现报错。

### 二、时间开销计算

​	在进行磁盘的时间开销计算前，需要了解以下基本概念：

#### 2.1 基本概念

<img src="F:\study\操作系统\OS_comp\picture\lab713.png" style="zoom:67%;" />

​	这里可以清晰地看出磁盘的结构。磁盘由多个**盘面**组成，每个盘面有上下两面，分别对应**一个磁头一个磁臂**。在盘面上会有许多不同半径的同心圆，一个同心圆就是一个**磁道**。不同盘面的多个同半径的磁道构成了一个**柱面**，一个柱面可以包含多个磁道。此外，一个盘面会被均分为多个**扇区**，每个扇区储存同样多的数据，每个磁道有同样多的扇区。

​	因此磁盘块的物理地址是用**三个参数**来表示的。也就是说要在磁盘上访问一个扇区，必须给出其**柱面号**、**盘面号**和**扇区号**，这称为扇区的物理地址，即物理扇区号。

​	此外还有逻辑地址LBA，其是连续的，将块从0开始编号一直到最大块数

##### 	编址方式：

- CHS（柱面/磁头/扇区）方式：

  1. ××磁道（柱面），××磁头，××扇区

  2. DOS中称为“绝对扇区”表示法。

- LBA（相对扇区号）方式：

  1. 以磁盘第一个扇区（0柱面、0磁头、1扇区）作为LBA的 0 扇区，后面的扇区依次编号

#### 2.2 计算方法

​	逻辑块地址（LBA）是一个线性地址，需要转换为磁盘的物理地址（即柱面、磁道和扇区）。以下是换算公式：

> 扇区号 = LBA % SPT（每个柱面扇区数）
> 磁道号 = (LBA / SPT) % HPC（每个柱面柱面数）
> 柱面号 = LBA / (SPT * HPC)
>
> 其中：
>
> **SPT** = 每个柱面扇区数
> **HPC** = 每个柱面柱面数
